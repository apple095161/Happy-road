{"remainingRequest":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\src\\views\\checkorder.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\src\\views\\checkorder.vue","mtime":1561019957164},{"path":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\Happy road\\Happy-road\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport \"jquery\";\nexport default {\n  data: function data() {\n    return {\n      isLoading: false,\n      coupon_code: \"\",\n      cartproduct: {},\n      getcartproduct: {},\n      arraylangth: [],\n      order: {},\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\"\n        },\n        products: {},\n        message: []\n      }\n    };\n  },\n  methods: {\n    getcart: function getcart() {\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_COUSTOMPATH, \"/cart\");\n      var vm = this;\n      vm.isLoading = true;\n      this.$http.get(api).then(function (response) {\n        vm.isLoading = false;\n\n        if (response.data.success) {\n          vm.getcartproduct = response.data.data;\n          vm.arraylangth = response.data.data.carts;\n          console.log(\"length\", vm.arraylangth);\n          console.log(vm.getcartproduct);\n        }\n      });\n    },\n    removeItem: function removeItem(id) {\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_COUSTOMPATH, \"/cart/\").concat(id);\n      var vm = this;\n      vm.isLoading = true;\n      this.$http.delete(api).then(function (response) {\n        console.log(response);\n        vm.$bus.$emit(\"updatecart\");\n        vm.getcart();\n        vm.isLoading = false;\n      });\n    },\n    addcouponCode: function addcouponCode() {\n      var vm = this;\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_COUSTOMPATH, \"/coupon\");\n      var coupon = {\n        code: vm.coupon_code\n      };\n      vm.isLoading = true;\n      this.$http.post(api, {\n        data: coupon\n      }).then(function (response) {\n        console.log(response);\n        vm.getcart();\n        vm.isLoading = false;\n      });\n    },\n    createOrder: function createOrder() {\n      var _this = this;\n\n      var vm = this;\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_COUSTOMPATH, \"/order\");\n      var order = vm.form; //vm.isLoading = true;\n\n      this.$validator.validate().then(function (valid) {\n        if (valid) {\n          _this.$http.post(api, {\n            data: order\n          }).then(function (response) {\n            console.log(\"訂單已建立\", response);\n\n            if (response.data.success) {\n              vm.$router.push(\"/setordercheck/\".concat(response.data.orderId));\n            }\n\n            vm.isLoading = false;\n          });\n        } else {\n          console.log(\"欄位不完整\");\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getcart();\n  }\n};",{"version":3,"sources":["checkorder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <div class=\"container\">\r\n      <main class=\"carts\">\r\n        <div class=\"container\">\r\n          <div class=\"row d-flex justify-content-center\">\r\n            <div class=\"h2\" v-if=\"!arraylangth.length\" style=\"display:block;\">\r\n              <span class=\"h3\">購物車無任何商品</span>\r\n              <div class=\"h4 mt-2\">\r\n                <router-link to=\"/Detail\">立刻選購去</router-link>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-md-9\" v-if=\"arraylangth.length\">\r\n              <div class=\"step d-flex align-items-center\">\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box1 text-center active\">填寫訂單資料</div>\r\n                </div>\r\n\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box2 text-center\">金流付款</div>\r\n                </div>\r\n\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box3 text-center\">完成</div>\r\n                </div>\r\n              </div>\r\n              <div class=\"h2 text-center py-3\">你的購物車</div>\r\n\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th width=\"100\"></th>\r\n                    <th width>品名</th>\r\n                    <th width=\"90\" class=\"text-left\">數量</th>\r\n                    <th width=\"70\" class=\"text-left\">尺寸</th>\r\n                    <th width=\"150\">價格</th>\r\n                    <th width=\"100\"></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in getcartproduct.carts\" :key=\"item.title\">\r\n                    <td>\r\n                      <img :src=\"item.product.imageUrl\" alt width=\"100\" height=\"80\">\r\n                    </td>\r\n                    <td>{{item.product.title }}</td>\r\n                    <td class=\"text-left\">{{item.qty}}/{{item.product.unit}}</td>\r\n                    <td class=\"text-left\">{{item.size}}</td>\r\n                    <td class=\"text-right\">{{item.product.price |currency}}</td>\r\n                    <td class=\"text-right\">\r\n                      <button class=\"btn btn-outline-danger\" @click=\"removeItem(item.id)\">\r\n                        <i class=\"far fa-trash-alt\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan=\"5\" class=\"text-right\">總計</td>\r\n                    <td>{{getcartproduct.total |currency}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan=\"5\" class=\"text-right\">折扣後總計</td>\r\n                    <td>{{getcartproduct.final_total |currency}}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div class=\"input-group mb-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"請輸入優惠碼\"\r\n                  aria-label=\"Recipient's username\"\r\n                  aria-describedby=\"button-addon2\"\r\n                  v-model=\"coupon_code\"\r\n                >\r\n                <div class=\"input-group-append\">\r\n                  <button\r\n                    class=\"btn btn-outline-secondary\"\r\n                    type=\"button\"\r\n                    id=\"button-addon2\"\r\n                    @click=\"addcouponCode\"\r\n                  >套用優惠碼</button>\r\n                </div>\r\n              </div>\r\n              <span class=\"text-danger h4\">想要打到骨折，請輸入happy new year</span>\r\n\r\n              <div class=\"h2 text-center py-3\">收件人資料</div>\r\n              <form action>\r\n                <div class=\"row mb-2\">\r\n                  <div class=\"col\">\r\n                    <label for=\"username\" class=\"mb-2\">收件人姓名</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      class=\"form-control\"\r\n                      id=\"username\"\r\n                      placeholder=\"請填寫收件人姓名\"\r\n                      v-model=\"form.user.name\"\r\n                      v-validate=\"'required'\"\r\n                      required\r\n                      :class=\"{'is-invalid':errors.has('name')}\"\r\n                    >\r\n                    <span class=\"text-danger\" v-if=\"errors.has('name')\">請輸入收件人姓名</span>\r\n                  </div>\r\n                  <div class=\"col\">\r\n                    <label for=\"usertel\" class=\"mb-2\">收件人電話</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"tel\"\r\n                      class=\"form-control\"\r\n                      id=\"usertel\"\r\n                      placeholder=\"請填寫收件人電話\"\r\n                      v-model=\"form.user.tel\"\r\n                      v-validate=\"'required'\"\r\n                      required\r\n                      :class=\"{'is-invalid':errors.has('tel')}\"\r\n                    >\r\n                    <span class=\"text-danger\" v-if=\"errors.has('tel')\">請輸入收件人電話</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"useraddress\" class=\"mb-2\">收件人地址</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"address\"\r\n                    class=\"form-control\"\r\n                    id=\"useraddress\"\r\n                    placeholder=\"請填寫收件人地址\"\r\n                    v-model=\"form.user.address\"\r\n                    v-validate=\"'required'\"\r\n                    required\r\n                    :class=\"{'is-invalid':errors.has('address')}\"\r\n                  >\r\n                  <span class=\"text-danger\" v-if=\"errors.has('address')\">請輸入收件人地址</span>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"useremail\" class=\"mb-2\">Email</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    class=\"form-control\"\r\n                    id=\"useremail\"\r\n                    placeholder=\"請填寫Email\"\r\n                    v-model=\"form.user.email\"\r\n                    v-validate=\"'required|email'\"\r\n                    required\r\n                    :class=\"{'is-invalid':errors.has('email')}\"\r\n                  >\r\n                  <span class=\"text-danger\" v-if=\"errors.has('email')\">{{errors.first('email')}}</span>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"usermessage\" class=\"mb-2\">留言</label>\r\n                  <textarea class=\"form-control\" id=\"usermessage\" rows=\"5\" v-model=\"form.message\"></textarea>\r\n                </div>\r\n\r\n                <div class=\"text-right py-5\">\r\n                  <button\r\n                    class=\"btn btn-primary\"\r\n                    style=\"width:200px;\"\r\n                    @click.prevent=\"createOrder\"\r\n                  >填寫完成，付款去</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"jquery\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      coupon_code: \"\",\r\n      cartproduct: {},\r\n      getcartproduct: {},\r\n      arraylangth: [],\r\n      order: {},\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\"\r\n        },\r\n        products: {},\r\n        message: []\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    getcart() {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.get(api).then(response => {\r\n        vm.isLoading = false;\r\n        if (response.data.success) {\r\n          vm.getcartproduct = response.data.data;\r\n          vm.arraylangth = response.data.data.carts;\r\n          console.log(\"length\", vm.arraylangth);\r\n          console.log(vm.getcartproduct);\r\n        }\r\n      });\r\n    },\r\n\r\n    removeItem(id) {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart/${id}`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.delete(api).then(response => {\r\n        console.log(response);\r\n        vm.$bus.$emit(\"updatecart\");\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    addcouponCode() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/coupon`;\r\n      const coupon = {\r\n        code: vm.coupon_code\r\n      };\r\n      vm.isLoading = true;\r\n      this.$http.post(api, { data: coupon }).then(response => {\r\n        console.log(response);\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    createOrder() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/order`;\r\n      const order = vm.form;\r\n      //vm.isLoading = true;\r\n      this.$validator.validate().then(valid => {\r\n        if (valid) {\r\n          this.$http.post(api, { data: order }).then(response => {\r\n            console.log(\"訂單已建立\", response);\r\n            if (response.data.success) {\r\n              vm.$router.push(`/setordercheck/${response.data.orderId}`);\r\n            }\r\n            vm.isLoading = false;\r\n          });\r\n        } else {\r\n          console.log(\"欄位不完整\");\r\n        }\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.getcart();\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views"}]}