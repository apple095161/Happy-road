{"remainingRequest":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\src\\views\\checkorder.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\src\\views\\checkorder.vue","mtime":1561012487862},{"path":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\vue-cli-ui\\cli3\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport \"jquery\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      coupon_code: \"\",\r\n      cartproduct: {},\r\n      getcartproduct: {},\r\n      arraylangth: [],\r\n      orderId: \"\",\r\n      order: {\r\n        user: {}\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    getcart() {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.get(api).then(response => {\r\n        vm.isLoading = false;\r\n        if (response.data.success) {\r\n          vm.getcartproduct = response.data.data;\r\n          vm.arraylangth = response.data.data.carts;\r\n          console.log(\"length\", vm.arraylangth);\r\n          console.log(vm.getcartproduct);\r\n        }\r\n      });\r\n    },\r\n    getorder() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/order/${vm.orderId}`;\r\n      vm.isLoading = true;\r\n      this.$http.get(api).then(response => {\r\n        vm.order = response.data.order;\r\n        console.log(vm.order);\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    removeItem(id) {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart/${id}`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.delete(api).then(response => {\r\n        console.log(response);\r\n        vm.$bus.$emit(\"updatecart\");\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    addcouponCode() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/coupon`;\r\n      const coupon = {\r\n        code: vm.coupon_code\r\n      };\r\n      vm.isLoading = true;\r\n      this.$http.post(api, { data: coupon }).then(response => {\r\n        console.log(response);\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    userdetail() {\r\n      const vm = this;\r\n      vm.$router.push(\"/setorder\");\r\n    }\r\n  },\r\n  created() {\r\n    this.orderId = this.$route.params.orderId;\r\n    this.getcart();\r\n    this.getorder();\r\n  }\r\n};\r\n",{"version":3,"sources":["checkorder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"checkorder.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <div class=\"container\">\r\n      <main class=\"carts\">\r\n        <div class=\"container\">\r\n          <div class=\"row d-flex justify-content-center\">\r\n            <div class=\"h2\" v-if=\"!arraylangth.length\" style=\"display:block;\">\r\n            <span class=\"h3\">購物車無任何商品</span>\r\n            <div class=\"h4 mt-2\">\r\n              <router-link to=\"/Detail\">\r\n                立刻選購去\r\n              </router-link>\r\n            </div>\r\n            </div>\r\n            \r\n            <div class=\"col-md-9\" v-if=\"arraylangth.length\">\r\n              <div class=\"step d-flex align-items-center\">\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box1 text-center active\">確認購物車</div>\r\n                </div>\r\n\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box2 text-center\">填寫收件人資料</div>\r\n                </div>\r\n\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"box box3 text-center\">確認訂單資訊</div>\r\n                </div>\r\n              </div>\r\n              <div class=\"h2 text-center py-3\">你的購物車</div>\r\n\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th width=\"100\"></th>\r\n                    <th width>品名</th>\r\n                    <th width=\"70\" class=\"text-left\">數量</th>\r\n                    <th width=\"70\" class=\"text-left\">尺寸</th>\r\n                    <th width=\"150\">價格</th>\r\n                    <th width=\"100\"></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in getcartproduct.carts\" :key=\"item.title\">\r\n                    <td>\r\n                      <img :src=\"item.product.imageUrl\" alt width=\"100\" height=\"80\">\r\n                    </td>\r\n                    <td>{{item.product.title }}</td>\r\n                    <td class=\"text-left\">{{item.qty}}/{{item.product.unit}}</td>\r\n                    <td class=\"text-left\">{{item.size}}</td>\r\n                    <td class=\"text-right\">{{item.product.price |currency}}</td>\r\n                    <td class=\"text-right\">\r\n                      <button class=\"btn btn-outline-danger\" @click=\"removeItem(item.id)\">\r\n                        <i class=\"far fa-trash-alt\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan=\"5\" class=\"text-right\">總計</td>\r\n                    <td>{{getcartproduct.total |currency}}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td colspan=\"5\" class=\"text-right\">折扣後總計</td>\r\n                    <td>{{getcartproduct.final_total |currency}}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div class=\"input-group mb-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"請輸入優惠碼\"\r\n                  aria-label=\"Recipient's username\"\r\n                  aria-describedby=\"button-addon2\"\r\n                  v-model=\"coupon_code\"\r\n                >\r\n                <div class=\"input-group-append\">\r\n                  <button\r\n                    class=\"btn btn-outline-secondary\"\r\n                    type=\"button\"\r\n                    id=\"button-addon2\"\r\n                    @click=\"addcouponCode\"\r\n                  >套用優惠碼</button>\r\n                </div>\r\n              </div>\r\n              <span class=\"text-danger h4\">想要打到骨折，請輸入happy new year</span>\r\n              <div class=\"text-right py-5\">\r\n                <button\r\n                  class=\"btn btn-primary\"\r\n                  style=\"width:300px;\"\r\n                  @click=\"userdetail()\"\r\n                >購物車確認無誤，填寫資料</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"jquery\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      coupon_code: \"\",\r\n      cartproduct: {},\r\n      getcartproduct: {},\r\n      arraylangth: [],\r\n      orderId: \"\",\r\n      order: {\r\n        user: {}\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    getcart() {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.get(api).then(response => {\r\n        vm.isLoading = false;\r\n        if (response.data.success) {\r\n          vm.getcartproduct = response.data.data;\r\n          vm.arraylangth = response.data.data.carts;\r\n          console.log(\"length\", vm.arraylangth);\r\n          console.log(vm.getcartproduct);\r\n        }\r\n      });\r\n    },\r\n    getorder() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/order/${vm.orderId}`;\r\n      vm.isLoading = true;\r\n      this.$http.get(api).then(response => {\r\n        vm.order = response.data.order;\r\n        console.log(vm.order);\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    removeItem(id) {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/cart/${id}`;\r\n      const vm = this;\r\n      vm.isLoading = true;\r\n      this.$http.delete(api).then(response => {\r\n        console.log(response);\r\n        vm.$bus.$emit(\"updatecart\");\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    addcouponCode() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${\r\n        process.env.VUE_APP_COUSTOMPATH\r\n      }/coupon`;\r\n      const coupon = {\r\n        code: vm.coupon_code\r\n      };\r\n      vm.isLoading = true;\r\n      this.$http.post(api, { data: coupon }).then(response => {\r\n        console.log(response);\r\n        vm.getcart();\r\n        vm.isLoading = false;\r\n      });\r\n    },\r\n    userdetail() {\r\n      const vm = this;\r\n      vm.$router.push(\"/setorder\");\r\n    }\r\n  },\r\n  created() {\r\n    this.orderId = this.$route.params.orderId;\r\n    this.getcart();\r\n    this.getorder();\r\n  }\r\n};\r\n</script>\r\n"]}]}