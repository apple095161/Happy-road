(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03ea696a"],{"36bb":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),o("div",{staticClass:"py-4 text-right"},[o("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openmodal(!0)}}},[t._v("新增優惠券")])]),o("table",{staticClass:"table table-hover"},[t._m(0),o("tbody",t._l(t.coupons,function(e){return o("tr",{key:e.id},[o("td",[t._v(t._s(e.title))]),o("td",[t._v(t._s(e.code))]),o("td",[t._v(t._s(t._f("normaltime")(e.due_date)))]),o("td",[t._v(t._s(e.percent)+"%")]),o("td",[o("button",{staticClass:"btn btn-outline-primary btn-sm mr-2",on:{click:function(o){return t.openmodal(!1,e)}}},[t._v("修改")]),o("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(o){return t.delcoupon(e.id)}}},[t._v("刪除")])])])}),0)]),o("Pagination",{attrs:{pages:t.pagination},on:{returnPageData:t.getcoupon}}),o("div",{staticClass:"modal",attrs:{tabindex:"-1",role:"dialog",id:"couponmodal"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[t._m(1),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"coupon-title"}},[t._v("請輸入優惠券名稱")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.setcoupon.title,expression:"setcoupon.title"}],staticClass:"form-control mt-2",attrs:{type:"text",id:"coupon-title",placeholder:"優惠券名稱"},domProps:{value:t.setcoupon.title},on:{input:function(e){e.target.composing||t.$set(t.setcoupon,"title",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"coupon-title"}},[t._v("請輸入優惠券到期日")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newtime,expression:"newtime"}],staticClass:"form-control mt-2",attrs:{type:"date",id:"coupon-title",placeholder:"優惠券到期日"},domProps:{value:t.newtime},on:{input:function(e){e.target.composing||(t.newtime=e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"coupon-title"}},[t._v("請輸入折扣%數")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.setcoupon.percent,expression:"setcoupon.percent"}],staticClass:"form-control mt-2",attrs:{type:"number",id:"coupon-title",placeholder:"",oninput:"if(value<0) value=1;if(value>100)value=100"},domProps:{value:t.setcoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.setcoupon,"percent",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"coupon-title"}},[t._v("請輸入優惠券使用代碼")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.setcoupon.code,expression:"setcoupon.code"}],staticClass:"form-control mt-2",attrs:{type:"text",id:"coupon-title",placeholder:""},domProps:{value:t.setcoupon.code},on:{input:function(e){e.target.composing||t.$set(t.setcoupon,"code",e.target.value)}}})])]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("關閉")]),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addcoupon(t.setcoupon)}}},[t._v("確認")])])])])])],1)},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",{attrs:{scope:"col"}},[t._v("優惠券名稱")]),o("th",{attrs:{scope:"col"}},[t._v("優惠券代碼")]),o("th",{attrs:{scope:"col"}},[t._v("到期日")]),o("th",{attrs:{scope:"col"}},[t._v("折扣數")]),o("th",{attrs:{scope:"col",width:"150"}},[t._v("刪除優惠券")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-header"},[o("h5",{staticClass:"modal-title"},[t._v("新增優惠券")]),o("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],i=o("1157"),s=o.n(i),c=o("e20e"),l={data:function(){return{isNew:!1,isLoading:!1,newtime:new Date,coupons:{},pagination:{},setcoupon:{title:"",is_enabled:1,percent:0,due_date:0,code:""}}},watch:{newtime:function(){var t=this,e=Math.floor(new Date(t.newtime)/1e3);t.setcoupon.due_date=e}},components:{Pagination:c["a"]},methods:{getcoupon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_COUSTOMPATH,"/admin/coupons?page=").concat(t),o=this;o.isLoading=!0,console.log(e),this.$http.get(e).then(function(t){console.log(t.data),o.pagination=t.data.pagination,o.coupons=t.data.coupons,o.isLoading=!1})},addcoupon:function(t){var e=this,o="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_COUSTOMPATH,"/admin/coupon"),a="post",n=this,i={title:t.title,is_enabled:t.is_enabled,percent:t.percent,due_date:t.due_date,code:t.code};n.isLoading=!0,n.isNew?this.$http[a](o,{data:n.setcoupon}).then(function(t){console.log(o),n.isLoading=!1,s()("#couponmodal").modal("hide"),console.log(n.newtime),e.getcoupon()}):(console.log(o),a="put",o="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_COUSTOMPATH,"/admin/coupon/").concat(n.setcoupon.id),this.$http[a](o,{data:i}).then(function(t){console.log(o),n.isLoading=!1,s()("#couponmodal").modal("hide"),e.getcoupon()}))},delcoupon:function(t){var e=this,o="".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_APIPATH,"/api/").concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_COUSTOMPATH,"/admin/coupon/").concat(t),a=this;a.isLoading=!0,this.$http.delete(o).then(function(t){console.log(t),a.isLoading=!1,e.getcoupon()})},openmodal:function(t,e){var o=this;t?(o.setcoupon={},o.newtime="",o.isNew=!0):(o.setcoupon=Object.assign({},e),o.newtime="",o.isNew=!1),s()("#couponmodal").modal("show")}},computed:{formatTime:function(){console.log(this.newDate)}},created:function(){this.getcoupon()}},r=l,u=o("2877"),p=Object(u["a"])(r,a,n,!1,null,null,null);e["default"]=p.exports},e20e:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav",{attrs:{"aria-label":"Page navigation example"}},[o("ul",{staticClass:"pagination"},[o("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[o("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.getPage(t.pages.current_page-1)}}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,function(e){return o("li",{key:e,staticClass:"page-item",class:{active:t.pages.current_page===e}},[o("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.getPage(e)}}},[t._v(t._s(e))])])}),o("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[o("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.getPage(t.pages.current_page+1)}}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},n=[],i={name:"pagination",props:{pages:{type:Object}},methods:{getPage:function(t){this.$emit("returnPageData",t)}}},s=i,c=o("2877"),l=Object(c["a"])(s,a,n,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-03ea696a.294992d2.js.map